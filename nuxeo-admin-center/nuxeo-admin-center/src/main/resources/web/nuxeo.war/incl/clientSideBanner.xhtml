<f:subview xmlns:h="http://java.sun.com/jsf/html"
     xmlns:c="http://java.sun.com/jstl/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:f="http://java.sun.com/jsf/core">

 <c:choose>
      <c:when test="#{connectUpdateStatusInfo.registered}">

       <c:if test="false"> Instance is registered, but we can not check the status from the server side </c:if>

       <c:if test="#{currentNuxeoPrincipal!=null and currentNuxeoPrincipal.isAdministrator()}">
         <div style="display:none" id="connectExpiredMessageBanner">
          <div class="bannerBottom unregistered">
           <div class="bannerMessage">
            <p>This Nuxeo #{connectUpdateStatusInfo.distributionName} instance is not registered to Nuxeo Connect : you won't be able to get the most recent fixes and stay up to date.
            <span class="bold" id="connectHotFixesCountMsg" style="display:none"><a target="marketplace" href="https://connect.nuxeo.com/nuxeo/site/marketplace/hotfixes/#{connectUpdateStatusInfo.distributionLabel}"><span id="connectHotFixesCount">3</span> hotfix(es) published since this release.</a></span>
            </p>
            <p>Nuxeo #{connectUpdateStatusInfo.distributionName} version: #{connectUpdateStatusInfo.distributionVersion}. Register and enable Nuxeo Connect to benefit from automatic maintenance.</p>
           </div>
           <div class="links">
              <a href="mailto:connect-support@nuxeo.com?subject=Issue%20in%20Connect%20contract%20#{connectUpdateStatusInfo.identifier}"> &gt; Contact connect-support@nuxeo.com to reactivate Nuxeo Connect</a>
           </div>
           <div class="clear" />
          </div>
         </div>

         <script>
         <!--
         jQuery(document).ready(function(){
             var script = document.createElement( 'script' );
             script.type = 'text/javascript';
             script.src = '#{connectUpdateStatusInfo.feedUrl}';
             jQuery("body").append(script);
          });
         function displayConnectUpdateStatus(registrationStatus) {
           if (registrationStatus.registered!=true) {
                 jQuery(document).ready(function(){
                     if (registrationStatus.nbPkgs>0) {
                       jQuery("#connectHotFixesCount").html(""+registrationStatus.nbPkgs);
                       jQuery("#connectHotFixesCountMsg").css("display","block");
                     }
                     jQuery("#connectExpiredMessageBanner").css("display","block");
                 });
           }
         }
         -->
         </script>
       </c:if>

      </c:when>
      <c:otherwise>

         <c:if test="false"> Instance is not registered </c:if>

         <div class="bannerBottom unregistered" >
           <div class="bannerMessage">
            <p>This Nuxeo #{connectUpdateStatusInfo.distributionName} instance is not registered to Nuxeo Connect : you won't be able to get the most recent fixes and stay up to date.
            <span class="bold" id="connectHotFixesCountMsg" style="display:none"><a target="marketplace" href="https://connect.nuxeo.com/nuxeo/site/marketplace/hotfixes/#{connectUpdateStatusInfo.distributionLabel}"><span id="connectHotFixesCount">3</span> hotfix(es) published since this release.</a></span>
            </p>
            <p>Nuxeo #{connectUpdateStatusInfo.distributionName} version: #{connectUpdateStatusInfo.distributionVersion}. Register and enable Nuxeo Connect to benefit from automatic maintenance.</p>
           </div>
           <div class="links">
            <a href="http://doc.nuxeo.com/display/NXDOC/Register+your+Nuxeo+instance" target="_blank"> &gt; How to enable Nuxeo Connect</a>
            <a href="https://connect.nuxeo.com/nuxeo/site/connect/trial/form?source=unregisteredClientBanner&#38;product=#{connectUpdateStatusInfo.distributionLabel}" target="_blank"> &gt; Subscribe to Nuxeo Connect</a>
           </div>
           <div class="clear" />
        </div>

        <script>
        <!--
        jQuery(document).ready(function(){
            var script = document.createElement( 'script' );
            script.type = 'text/javascript';
            script.src = '#{connectUpdateStatusInfo.feedUrl}';
            jQuery("body").append(script);
        });
        function displayConnectUpdateStatus(nbPkg) {
                  jQuery(document).ready(function(){
                  if (nbPkg>0) {
                   jQuery("#connectHotFixesCount").html(""+nbPkg);
                   jQuery("#connectHotFixesCountMsg").css("display","block");
                  }
                 });
         }
         -->
        </script>


      </c:otherwise>

 </c:choose>



</f:subview>