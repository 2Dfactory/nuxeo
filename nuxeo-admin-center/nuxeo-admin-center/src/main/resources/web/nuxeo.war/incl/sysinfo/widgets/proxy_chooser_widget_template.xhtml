<span xmlns:f="http://java.sun.com/jsf/core"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  id="#{widget.id}">
<c:if test="#{widget.mode != 'edit'}">#{field}</c:if>
<c:if test="#{widget.mode == 'edit'}">

  <h:selectOneMenu id="#{widget.id}" value="#{field}"
    styleClass="#{widgetProperty_styleClass}"
    required="#{widgetProperty_required}">

    <a4j:support event="onchange" reRender="setupPanel"
      immediate="#{widgetProperty_immediate}"
      actionListener="#{setupWizardAction.proxyChange}">
    </a4j:support>

    <f:selectItem itemValue="none"
      itemLabel="#{messages['label.setup.nuxeo.httpProxy.none']}" />
    <f:selectItem itemValue="anonymous"
      itemLabel="#{messages['label.setup.nuxeo.httpProxy.anonymous']}" />
    <f:selectItem itemValue="authenticated"
      itemLabel="#{messages['label.setup.nuxeo.httpProxy.authenticated']}" />

  </h:selectOneMenu>
  <h:message styleClass="errorMessage" for="#{widget.id}"
    id="#{widget.id}_message" />

</c:if>
</span>
