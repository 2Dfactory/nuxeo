<?xml version="1.0"?>
<component name="org.nuxeo.ecm.core.management">

  <implementation
    class="org.nuxeo.ecm.core.management.CoreManagementComponent" />

  <require>org.nuxeo.ecm.core.repository.RepositoryService</require>
  
  <service>
    <provide interface="org.nuxeo.ecm.core.management.statuses.ProbeScheduler" />
    <provide interface="org.nuxeo.ecm.core.management.statuses.ProbeRunner" />
    <provide interface="org.nuxeo.ecm.core.management.statuses.AdministrativeStatus"/>
  </service>

  <extension-point name="probes">
    <object class="org.nuxeo.ecm.core.management.statuses.ProbeDescriptor" />
  </extension-point>
  
  <extension target="org.nuxeo.runtime.management.ResourcePublisher" point="factories">
     <factory name="managementStatusesFactory"
                    class="org.nuxeo.ecm.core.management.statuses.StatusesManagementFactory" />
  </extension>
  
  <extension target="org.nuxeo.ecm.core.schema.TypeService" point="schema">
    <schema name="status" src="schemas/status.xsd" />
  </extension>
  
  <extension target="org.nuxeo.ecm.core.schema.TypeService" point="doctype">
    <doctype name="AdministrativeStatus" extends="Document">
      <schema name="dublincore" />
      <schema name="status" />
    </doctype>
  </extension>

  <extension
    target="org.nuxeo.ecm.core.management"
    point="probes">
    <probe name="administrativeStatus"
      class="org.nuxeo.ecm.core.management.statuses.AdministrativeStatusProbe"
      serviceClass="org.nuxeo.ecm.core.management.statuses.AdministrativeStatus"/>
  </extension>
      

</component>
