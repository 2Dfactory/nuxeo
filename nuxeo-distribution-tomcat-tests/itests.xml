<project name="integration-tests"
         xmlns:nx="urn:nuxeo-build"
         xmlns:artifact="urn:nuxeo-artifact">
  <taskdef resource="org/nuxeo/build/antlib.xml" uri="urn:nuxeo-build" />
  <taskdef resource="org/nuxeo/build/artifact/antlib.xml"
           uri="urn:nuxeo-artifact" />
  <taskdef resource="net/sf/antcontrib/antlib.xml" />

  <property name="out.dir" value="${maven.project.build.directory}" />
  <property name="nuxeo.home" value="${out.dir}/tomcat" />
  <property name="classifier" value="nuxeo-cap" />

  <unzip dest="${out.dir}/" overwrite="false">
    <artifact:resolveFile key="org.nuxeo:nuxeo-ftest::zip" />
  </unzip>
  <import file="${out.dir}/nuxeo-ftest.xml" />

  <target name="prepare-environment"
          depends="prepare-db,prepare-tomcat,wizard-on">

    <!-- TODO

    <copy todir="${maven.project.build.directory}">
      <artifact:resolveFile key="org.nuxeo.ecm.distribution:nuxeo-marketplace-dm::zip" />
    </copy>

    http://ant.apache.org/manual/Tasks/checksum.html
        <checksum file="foo.bar" property="foobarMD5"/>
    copy packages.xml avec replace @foobarMD5@

    <move file="${maven.project.build.directory}/nuxeo-marketplace-dm-${nuxeo.distribution.verion}.zip"
    tofile="${maven.project.build.directory}/tomcat/tmp/${foobarMD5}" />

      <copy file="src/main/resources/packages.xml" tofile="${maven.project.build.directory}/tomcat/tmp/packages.xml" >
    <filterset>
      <filter token="foobarMD5" value="${foobarMD5}"/>
    </filterset>
  </copy>

    -->
  </target>

</project>
