<nxu:set var="actionLabel"
  value="#{messages[action.label]}"
  resolveTwice="true"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:h="http://java.sun.com/jsf/html">
  #{action.icon}
<nxu:set var="actionIcon" value="#{action.icon}"
  resolveTwice="true">
  <nxu:graphicImage value="#{nxu:test(empty actionIcon and hideLabel, '/icons/action_empty.png', actionIcon)}"
    title="#{actionLabel}"
    rendered="#{not hideIcon}"
    alt="#{actionLabel}"
    styleClass="smallIcon tipsyShow #{empty tipsyGravity?'tipsyGravitySE':tipsyGravity} #{action.properties.iconStyleClass}" />
  <h:outputText value=" " rendered="#{not hideIcon and not hideLabel}" />
  <h:outputText value="#{actionLabel}"
    rendered="#{not hideLabel}"
    styleClass="actionLabel #{action.properties.labelStyleClass}" />
</nxu:set>
</nxu:set>