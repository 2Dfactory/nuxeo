<assembly>

  <zipEntrySet id="base-template">
    <artifact>org.nuxeo.ecm.distribution:nuxeo-distribution-server:${nuxeo.webengine.version}:zip</artifact>
  </zipEntrySet>

  <fileSet id="template">
    <directory>src/main/resources</directory>
  </fileSet>

  <artifactSet id="bundles">
    <artifacts>
      <artifact group="org.nuxeo.runtime" name="nuxeo-runtime-jetty-adapter" version="${nuxeo.runtime.version}"/>
      <artifact group="org.nuxeo.ecm.platform" name="nuxeo-platform-directory-ldap" version="${nuxeo.platform.version}"/>
    </artifacts>
  </artifactSet>

  <fileSet id="scripts-groovy">
    <directory>src/main/scripts-groovy</directory>
  </fileSet>


  <artifactSet id="third-party-libs">
    <artifacts>
      <artifact group="javax.servlet" name="servlet-api" version="2.4"/>
      <artifact group="org.mortbay.jetty" name="jetty" version="6.1H.7"/>
      <artifact group="org.mortbay.jetty" name="jetty-plus" version="6.1H.7"/>
      <artifact group="org.mortbay.jetty" name="jetty-naming" version="6.1H.7"/>
      <artifact group="org.mortbay.jetty" name="jetty-annotations" version="6.1H.7"/>
      <artifact group="org.mortbay.jetty" name="jetty-util" version="6.1H.7"/>
      <artifact group="jotm" name="jotm" version="2.0.10"/>
      <artifact group="javax.ejb" name="ejb-api" version="3.0" />
      <artifact group="javax.transaction" name="jta" version="1.0.1B" />


      <!-- for nuxeo-opensocial -->
      <artifact group="cup" name="java-cup" version="0.11a" />
      <artifact group="jboss" name="javassist" version="4.0.4.GA" />
      <artifact group="com.thoughtworks.xstream" name="xstream" />
      <artifact group="commons-httpclient" name="commons-httpclient"  version="3.1"/>
      <artifact group="net.sourceforge.cssparser" name="cssparser" />
      <artifact group="org.w3c" name="sac" />
      <artifact group="net.sf.ehcache" name="ehcache" />
      <artifact group="commons-codec" name="commons-codec" version="1.3"/>
      <artifact group="commons-lang" name="commons-lang" version="2.3"/>
      <artifact group="com.google.collections" name="google-collections" version="0.8"/>
      <artifact group="org.apache.shindig" name="shindig-common" />
    <artifact group="com.google.gwt" name="gwt-servlet" version="1.5.3"/>
    </artifacts>
  </artifactSet>


  <artifactSet id="nuxeo-opensocial">
    <import>*</import>
    <includes>
      <artifact group="org.nuxeo.opensocial" />
    </includes>
  </artifactSet>

  <artifactSet id="lm-projects">
    <import>*</import>
    <includes>
     <artifact group="com.leroymerlin.corp.fr.nuxeo.portal"  name="lm-portal-webapp" version="2.0-SNAPSHOT" />
     <artifact group="com.leroymerlin.corp.fr.nuxeo.portal"  name="lm-portal-coretypes" version="2.0-SNAPSHOT" />
     <artifact group="com.leroymerlin.corp.fr.nuxeo.portal"  name="lm-portal-user" version="2.0-SNAPSHOT" />
     <artifact group="com.leroymerlin.corp.fr.nuxeo.portal"  name="lm-portal-userworkspace" version="2.0-SNAPSHOT" />
     <artifact group="com.leroymerlin.corp.fr.nuxeo.portal"  name="lm-portal-theme-fragment" version="2.0-SNAPSHOT" />
     <artifact group="com.leroymerlin.corp.fr.nuxeo.portal"  name="lm-portal-external" version="2.0-SNAPSHOT" />
    </includes>
  </artifactSet>



  <assemble>
    <set>launcher-lib</set>
    <outputFile>/</outputFile>
  </assemble>

  <assemble>
    <set>third-party-libs</set>
    <outputFile>lib</outputFile>
  </assemble>

   <assemble>
      <set>scripts-groovy</set>
      <outputFile>/scripts</outputFile>
  </assemble>


  <assemble>
    <set>bundles</set>
    <set>nuxeo-opensocial</set>
    <set>lm-projects</set>
    <outputFile>bundles</outputFile>
  </assemble>

  <assemble>
    <set>base-template</set>
    <set>template</set>
    <outputFile>/</outputFile>
  </assemble>

  <assemble>
    <delete>true</delete>
    <outputFile>lib</outputFile>
    <file>commons-lang-2.2.jar</file>
  </assemble>

</assembly>



