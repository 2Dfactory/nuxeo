<?xml version="1.0"?>
<component
    name="org.nuxeo.ecm.platform.content.template.service.ContentTemplateService.defaultContrib">

  <extension
      target="org.nuxeo.ecm.platform.content.template.service.ContentTemplateService"
      point="factory">

    <contentFactory
        name="SimpleTemplateFactory"
        class="org.nuxeo.ecm.platform.content.template.factories.SimpleTemplateBasedFactory"/>

    <contentFactory
        name="ImportFactory"
        class="org.nuxeo.ecm.platform.content.template.factories.ImportBasedFactory"/>

  </extension>
  
  <extension
      target="org.nuxeo.ecm.platform.content.template.service.ContentTemplateService"
      point="factorySelector">
      
      <factorySelector name="00-property-filter" class="org.nuxeo.ecm.platform.content.template.selectors.PropertyFilterSelector"/>
      <factorySelector name="10-type" class="org.nuxeo.ecm.platform.content.template.selectors.TypeSelector"/>
      <factorySelector name="20-facet" class="org.nuxeo.ecm.platform.content.template.selectors.FacetSelector"/>

   </extension>

  <extension
      target="org.nuxeo.ecm.platform.content.template.service.ContentTemplateService"
      point="factoryBinding">

    <factoryBinding name="RootFactory" factoryName="SimpleTemplateFactory" targetType="Root">
      <acl>
        <ace granted="true" permission="Everything" principal="Administrator"/>
        <ace granted="true" permission="Dream" principal="Danny"/>
        <ace granted="false" permission="RedRum" principal="DannysImaginaryFriend"/>
      </acl>
      <template name="default">
        <templateItem typeName="Domain" id="default" title="defaut domain"
                      description="Nuxeo5 default domain"/>
      </template>
    </factoryBinding>

    <factoryBinding name="DomainFactory" factoryName="SimpleTemplateFactory" targetType="Domain">
      <template name="default">
        <templateItem typeName="WorkspaceRoot" id="Workspaces" title="Workspaces"
                      description="Workspaces"/>
        <templateItem typeName="SectionRoot" id="Sections" title="Sections" description="Sections"/>
        <templateItem typeName="TemplateRoot" id="Templates" title="Templates"
                      description="Root of workspaces templates"/>
        <templateItem typeName="Section" id="Section" title="Section" path="Sections"
                      description="Section created in SectionRoot"/>
      </template>
    </factoryBinding>

    <factoryBinding name="WorkspaceFactory" factoryName="SimpleTemplateFactory"
                     targetType="Workspace">
      <template name="default">
        <templateItem typeName="Folder" id="Folder1" title="Folder1" description="First Folder">
          <properties>
            <property xpath="dublincore:creator" value="Administrator"/>
            <property xpath="dublincore:coverage" value="coverage"/>
          </properties>
        </templateItem>
        <templateItem typeName="Folder" id="Secret_Folder" title="Secret Folder"
                      description="Secret Folder">
          <acl>
            <ace granted="true" permission="Everything" userName="Administrator"/>
            <ace granted="false" permission="Everything" userName="Everyone"/>
          </acl>
        </templateItem>
        <templateItem typeName="Folder" id="Folder2" title="Folder2" description="Second Folder"/>
      </template>
    </factoryBinding>
   
   <factoryBinding name="SuperSpaceFactory" factoryName="SimpleTemplateFactory" targetFacet="SuperSpace">
      <acl>
        <ace granted="true" permission="Everything" principal="Administrator"/>
        <ace granted="true" permission="Dream" principal="Danny"/>
        <ace granted="false" permission="RedRum" principal="DannysImaginaryFriend"/>
      </acl>
      <template name="default">
        <templateItem typeName="Folder" id="FacetFolder" title="FacetFolder"
                      description="folder created by facetFactories"/>
      </template>
    </factoryBinding>

   <factoryBinding name="SourceFactory" factoryName="SimpleTemplateFactory" targetType="Workspace">
     <option name="filter-property">dc:source</option>
     <option name="filter-value">test</option>
     <template name="default">
        <templateItem typeName="Note" id="SourceFactoryPropertyTest" title="Source Factory Property Test" description="Test Note">
          <properties>
            <property xpath="dc:creator" value="Administrator"/>
            <property xpath="dc:coverage" value="coverage"/>
            <property xpath="dc:source" value="test"/>
          </properties>
        </templateItem>
      </template>
   </factoryBinding>


  </extension>

</component>
