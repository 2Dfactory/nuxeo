<?xml version="1.0"?>
<!--
  ~ (C) Copyright 2009 Nuxeo SA (http://nuxeo.com/) and contributors.
  ~
  ~ All rights reserved. This program and the accompanying materials
  ~ are made available under the terms of the GNU Lesser General Public License
  ~ (LGPL) version 2.1 which accompanies this distribution, and is available at
  ~ http://www.gnu.org/licenses/lgpl.html
  ~
  ~ This library is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ Lesser General Public License for more details.
  ~
  ~ Contributors:
  ~     Thomas Roger
  -->

<component name="org.nuxeo.ecm.platform.publisher.contrib">

  <extension target="org.nuxeo.ecm.platform.publisher.impl.service.PublisherServiceImpl"
    point="factory">

    <publishedDocumentFactory name="CoreProxy" class="org.nuxeo.ecm.platform.publisher.impl.core.CoreProxyFactory" />
    <publishedDocumentFactory name="LocalFile" class="org.nuxeo.ecm.platform.publisher.impl.localfs.FSPublishedDocumentFactory" />
    <publishedDocumentFactory name="RemoteDocModel" class="org.nuxeo.ecm.platform.publisher.remoting.server.SimpleExternalDocumentModelFactory" />
    <publishedDocumentFactory name="ClientProxyFactory" class="org.nuxeo.ecm.platform.publisher.remoting.client.ClientProxyFactory" />

  </extension>

  <extension target="org.nuxeo.ecm.platform.publisher.impl.service.PublisherServiceImpl"
    point="tree">

    <publicationTree name="CoreTree" class="org.nuxeo.ecm.platform.publisher.impl.core.SectionPublicationTree" />
    <publicationTree name="LocalFSTree" class="org.nuxeo.ecm.platform.publisher.impl.localfs.LocalFSPublicationTree" />
    <publicationTree name="ClientForRemoteTree" class="org.nuxeo.ecm.platform.publisher.remoting.client.ClientRemotePublicationTree" />
    <publicationTree name="CoreTreeWithExternalDocs" class="org.nuxeo.ecm.platform.publisher.remoting.server.CoreTreeWithExternalDocs" />

  </extension>

  <extension target="org.nuxeo.ecm.platform.publisher.impl.service.PublisherServiceImpl"
    point="validatorsRule">

    <validatorsRule name="CoreValidatorsRule" class="org.nuxeo.ecm.platform.publisher.rules.DefaultValidatorsRule" />

  </extension>

  <extension target="org.nuxeo.ecm.platform.publisher.impl.service.PublisherServiceImpl"
    point="treeInstance">

    <publicationTreeConfig name="DefaultSectionsTree" tree="CoreTree" factory="CoreProxy" >
      <parameters>
        <parameter name="RootPath">/default-domain/sections</parameter>
        <parameter name="enableSnapshot">true</parameter>
        <parameter name="iconExpanded">/icons/folder_open.gif</parameter>
        <parameter name="iconCollapsed">/icons/folder.gif</parameter>
      </parameters>
    </publicationTreeConfig>

  </extension>

</component>