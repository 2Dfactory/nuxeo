<!--
  -->

<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:word="*" >

   <mx:Script>
		<![CDATA[
			import mx.controls.Alert;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;	

			private function doLogin():void {
				 //Alert.show(login.text + " : " + password.text, "info");
				authRequest.send();
			}	

			private function faultHandler(event:FaultEvent):void {
				 Alert.show(event.fault.faultString, event.fault.faultCode.toString());
			}	
			
	]]>
	</mx:Script>

    <mx:RemoteObject id="authPingTester" destination="authPingTester" fault="faultHandler(event)"/>

    <mx:Panel
        title="Nuxeo-Flex Login Screen"
        paddingTop="10" paddingBottom="10" paddingLeft="10" paddingRight="10">

			<mx:Form width="100%" backgroundColor="#ffffff" borderStyle="solid" height="100%">
				<mx:FormHeading label="Authentication" />
				<mx:FormItem label="Login :" width="100%">
					 <mx:TextInput id="login" width="200"/>
				</mx:FormItem>
				<mx:FormItem label="Password:" width="100%">
					 <mx:TextInput id="password" width="200" displayAsPassword="true"/>
				</mx:FormItem>
				<mx:Button label="Login" click="doLogin()"/>

			</mx:Form>


   <mx:Label text='return: "{authRequest.lastResult.reponse.status}"'/>

   <mx:Button label="ping server" click="authPingTester.ping()"/>
   <mx:Label text='server ping reply: "{authPingTester.ping.lastResult}"'/>

</mx:Panel>

  <mx:HTTPService id="authRequest" url="/nuxeo/flexlogin/" useProxy="false" method="POST">
        <mx:request xmlns="">
            <user_name>{login.text}</user_name>
            <user_password>{password.text}</user_password>
        </mx:request>
    </mx:HTTPService>

</mx:Application>
