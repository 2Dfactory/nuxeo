<span xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:nxd="http://nuxeo.org/nxweb/document"> <c:if test="false">
Template displaying an action depending of its type (@since 5.6).

Parameters:
- action: the action instance (mandatory)
</c:if> <c:choose>

    <c:when test="#{action.type == 'button'}">
      <nxh:commandButton action="#{action.getLink()}"
        onclick="#{action.confirm}" id="#{action.id}"
        value="#{messages[action.label]}" styleClass="button">
        <ui:insert name="inside_action" />
      </nxh:commandButton>
    </c:when>

    <c:when test="#{action.type == 'link'}">
      <nxh:commandLink action="#{action.getLink()}"
        onclick="#{action.confirm}" id="#{action.id}"
        value="#{messages[action.label]}">
        <ui:insert name="inside_action" />
      </nxh:commandLink>
    </c:when>

    <c:when test="#{action.type == 'link_icon_text'}">
      <nxh:commandLink action="#{action.link}" id="#{action.id}"
        onclick="#{action.confirm}">
        <h:graphicImage value="#{action.icon}"
          rendered="#{not empty action.icon}"
          title="#{messages[action.label]}"
          alt="#{messages[action.label]}" styleClass="smallIcon" />
        <h:outputText value=" #{messages[action.label]}" />
        <ui:insert name="inside_action" />
      </nxh:commandLink>
    </c:when>

    <c:when test="#{action.type == 'bare_link'}">
      <a target="_blank" href="#{action.getLink()}"><img
        src="#{action.icon}" /> <h:outputText
          value="#{messages[action.label]}" styleClass="boldLabel" /> </a>
    </c:when>

    <c:when test="#{action.type == 'link_icon'}">
      <nxh:commandLink action="#{action.getLink()}" id="#{action.id}"
        onclick="#{action.confirm}" styleClass="button">
        <h:graphicImage value="#{action.icon}"
          rendered="#{not empty action.icon}"
          title="#{messages[action.label]}"
          alt="#{messages[action.label]}" styleClass="smallIcon" />
        <ui:insert name="inside_action" />
      </nxh:commandLink>
    </c:when>

    <c:when test="#{action.getType() == 'fancybox'}">
    <!-- fancybox include property contains resources -->
    <!-- fancybox iframe property contains method to resolve-->
      <nxu:set var="include"
        value="#{action.properties.fancybox.properties.include}">
        <nxu:set var="iframe"
          value="#{action.properties.fancybox.properties.iframe}"
          resolveTwice="true">
          <a4j:commandLink id="#{action.id}_link" ajaxSingle="true"
            ignoreDupResponses="true" requestDelay="100"
            onclick="showFancyBox('##{action.id}_box');" styleClass="button">
            <h:graphicImage value="#{action.icon}"
              rendered="#{not empty action.icon}"
              title="#{messages[action.label]}"
              alt="#{messages[action.label]}" styleClass="smallIcon" />
          </a4j:commandLink>
          <ui:insert name="inside_action" />
          <div style="display: none;">
            <div id="#{action.id}_box">
              <c:choose>
                <c:when test="#{iframe eq null}">
                  <ui:include src="../#{include}" />
                </c:when>
                <c:otherwise>
                  <iframe src="#{iframe}" />
                </c:otherwise>
              </c:choose>
            </div>
          </div>
        </nxu:set>
      </nxu:set>
    </c:when>

    <!-- Return an icon + text link if type is null -->
    <c:otherwise>
      <nxh:commandLink action="#{action.getLink()}" id="#{action.id}"
        onclick="#{action.confirm}">
        <h:graphicImage value="#{action.icon}"
          rendered="#{not empty action.icon}"
          title="#{messages[action.label]}"
          alt="#{messages[action.label]}" styleClass="smallIcon" />
        <h:outputText value=" #{messages[action.label]}" />
        <ui:insert name="inside_action" />
      </nxh:commandLink>
    </c:otherwise>

  </c:choose>

</span>