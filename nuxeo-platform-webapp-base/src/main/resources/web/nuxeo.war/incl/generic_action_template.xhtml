<span xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:nxd="http://nuxeo.org/nxweb/document"> <c:if test="false">
Template displaying an action depending of its type (@since 5.6).

Parameters:
- action: the action instance (mandatory)
</c:if> <c:choose>

    <c:when test="#{action.type == 'button'}">
      <nxh:commandButton action="#{action.getLink()}"
        onclick="#{action.confirm}" id="#{action.id}"
        value="#{messages[action.label]}" styleClass="button">
        <ui:insert name="inside_action" />
      </nxh:commandButton>
    </c:when>

    <c:when test="#{action.type == 'link'}">
      <nxh:commandLink action="#{action.getLink()}"
        onclick="#{action.confirm}" id="#{action.id}"
        value="#{messages[action.label]}">
        <ui:insert name="inside_action" />
      </nxh:commandLink>
    </c:when>

    <!-- WIP
    <c:when test="#{action.getType() == 'rest_link'}">
      <nxd:restDocumentLink document="#{currentDocument}"
        tab="#{webActions.currentTabId}" subTab="#{subTab.id}">
        <h:outputText value="#{messages[subTab.label]}" />
      </nxd:restDocumentLink>
    </c:when>
    -->

    <c:when test="#{action.type == 'link_icon_text'}">
      <nxh:commandLink action="#{action.link}" id="#{action.id}"
        onclick="#{action.confirm}">
        <h:graphicImage value="#{action.icon}"
          rendered="#{not empty action.icon}"
          title="#{messages[action.label]}"
          alt="#{messages[action.label]}" styleClass="smallIcon" />
        <h:outputText value=" #{messages[action.label]}" />
        <ui:insert name="inside_action" />
      </nxh:commandLink>
    </c:when>

    <c:when test="#{action.type == 'bare_link'}">
      <a target="_blank" href="#{action.getLink()}"><img
        src="#{action.icon}" /> <h:outputText
          value="#{messages[action.label]}" styleClass="boldLabel" /> </a>
    </c:when>

    <c:when test="#{action.type == 'link_icon'}">
      <nxh:commandLink action="#{action.getLink()}" id="#{action.id}"
        onclick="#{action.confirm}">
        <h:graphicImage value="#{action.icon}"
          rendered="#{not empty action.icon}"
          title="#{messages[action.label]}"
          alt="#{messages[action.label]}" styleClass="smallIcon" />
        <ui:insert name="inside_action" />
      </nxh:commandLink>
    </c:when>

    <c:when test="#{action.getType() == 'fancybox'}">
      <a4j:form id="#{action.id}_form" ajaxSubmit="true"
        styleClass="action_bar">
        <a4j:commandLink value="#{messages[action.label]}"
          id="#{action.id}_link" ajaxSingle="true"
          ignoreDupResponses="true" requestDelay="100"
          onclick="showFancyBox('##{action.id}_box');">
          <h:graphicImage value="#{action.icon}"
            rendered="#{not empty action.icon}"
            title="#{messages[action.label]}"
            alt="#{messages[action.label]}" styleClass="smallIcon" />
        </a4j:commandLink>
        <ui:insert name="inside_action" />
      </a4j:form>
      <div style="display: none;">
        <div id="#{action.id}_box">
          <ui:include
            src="../#{action.properties.fancybox.properties.url}" />
        </div>
      </div>
    </c:when>

    <!-- Return an icon + text link if type is null -->
    <c:otherwise>
      <nxh:commandLink action="#{action.getLink()}" id="#{action.id}"
        onclick="#{action.confirm}">
        <h:graphicImage value="#{action.icon}"
          rendered="#{not empty action.icon}"
          title="#{messages[action.label]}"
          alt="#{messages[action.label]}" styleClass="smallIcon" />
        <h:outputText value=" #{messages[action.label]}" />
        <ui:insert name="inside_action" />
      </nxh:commandLink>
    </c:otherwise>

  </c:choose>

</span>