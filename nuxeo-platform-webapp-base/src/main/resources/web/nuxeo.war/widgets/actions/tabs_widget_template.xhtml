<div xmlns:h="http://java.sun.com/jsf/html"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jstl/core"
  class="#{widgetProperty_styleClass}">

<nxu:valueHolder id="#{idPrefix}clickedActionIdHolder"
  var="clickedActionId"
  defaultValue="#{widgetProperty_currentTabAction.id}">

  <div class="tabsBar">
    <ul>
      <c:forEach var="action" items="#{widgetProperty_actions}">
        <li class="#{nxu:test(currentTabAction.id == action.id, 'selected', '')}">
          <ui:decorate template="/widgets/incl/form_template.xhtml">
            <ui:param name="addForm" value="#{widgetProperty_addForm}" />
            <ui:param name="formId" value="#{nxu:jsfTagIdEscape(widget.id)}_#{nxu:jsfTagIdEscape(action.id)}_form" />
            <ui:param name="useAjaxForm" value="#{widgetProperty_useAjaxForm and action.properties.ajaxSupport}" />
            <ui:param name="formStyleClass" value="subWidgetForm" />
            <ui:define name="form_template_content">
              <ui:decorate template="/incl/action/action_template.xhtml">
                <ui:param name="actionsDisplay" value="#{widgetProperty_actionsDisplay}" />
                <ui:param name="ajaxReRender" value="#{widgetProperty_ajaxReRender}" />
              </ui:decorate>
            </ui:define>
          </ui:decorate>
        </li>
      </c:forEach>
    </ul>

    <c:forEach var="action" items="#{widgetProperty_actions}">
      <ui:include src="/incl/action/generic_after_action_template.xhtml" />
    </c:forEach>

  </div>

  <div style="clear:both"></div>
  <div class="tabsContent">
    <c:if test="#{not empty currentTabAction.link}">
      <ui:include src="#{currentTabAction.link}"/>
    </c:if>
  </div>

</nxu:valueHolder>

</div>